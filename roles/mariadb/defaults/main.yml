---
# defaults file for mariadb

# =============================================================================
# AUTHENTICATION
# =============================================================================
# MariaDB root password — OVERRIDE in group_vars vault!
mariadb_root_password: "ChangeMeToSecurePassword123!"

# =============================================================================
# CONDITIONAL FLAGS  (boolean — all default to false for safety)
# =============================================================================

# Create databases per domain/subdomain.
# Set to true on first deploy or when adding new domains.
mariadb_create_databases: false

# Create database users per domain/subdomain.
# Requires mariadb_create_databases: true (or databases already exist).
mariadb_create_users: false

# Save database credentials to each user's home directory.
# Only useful when mariadb_create_users: true.
mariadb_save_credentials: false

# Apply the performance tuning template to /etc/my.cnf.d/
# Set to false to preserve any manually tuned configuration.
mariadb_apply_config: true

# Open MySQL port via firewalld for remote connections.
mariadb_allow_remote: false

# =============================================================================
# CONNECTION SETTINGS
# =============================================================================
mariadb_max_connections: 200
mariadb_max_connect_errors: 1000
mariadb_wait_timeout: 300
mariadb_interactive_timeout: 300

# =============================================================================
# INNODB / BUFFER POOL
# =============================================================================
mariadb_innodb_buffer_pool_size: "1G"
mariadb_innodb_buffer_pool_instances: 4
mariadb_innodb_log_file_size: "256M"
mariadb_innodb_log_buffer_size: "16M"
mariadb_innodb_flush_log_at_trx_commit: 2

# =============================================================================
# QUERY CACHE
# =============================================================================
mariadb_query_cache_type: 1
mariadb_query_cache_size: "64M"
mariadb_query_cache_limit: "2M"

# =============================================================================
# TABLE / THREAD CACHE
# =============================================================================
mariadb_table_open_cache: 4000
mariadb_table_definition_cache: 2000
mariadb_thread_cache_size: 50

# =============================================================================
# SORT / JOIN BUFFERS
# =============================================================================
mariadb_sort_buffer_size: "2M"
mariadb_read_buffer_size: "1M"
mariadb_read_rnd_buffer_size: "2M"
mariadb_join_buffer_size: "2M"

# =============================================================================
# TEMPORARY TABLES
# =============================================================================
mariadb_tmp_table_size: "64M"
mariadb_max_heap_table_size: "64M"

# =============================================================================
# LOGGING
# =============================================================================
mariadb_slow_query_log: 1
mariadb_long_query_time: 2
mariadb_log_queries_not_using_indexes: 0

# =============================================================================
# MISC
# =============================================================================
mariadb_performance_schema: "OFF"
mariadb_max_allowed_packet: "64M"
